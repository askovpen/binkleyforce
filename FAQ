
	BinkleyForce FAQ.

v. 1.15	от 26 марта 2002.

Q: А как дл многолинейки сделать разные строки инициализации?
A: /DR/
   Может быть, что-то вроде этого:

   modem_dial_prefix (Port ttyS0) AT&K3DT
   modem_dial_prefix (Port ttyS1) AT&K0DP
   modem_dial_prefix ATDP

Q: Подскажите как в сабже переопределить входной и выходной каталог дл
   определенного адреса?
A: /KAS/
   При наличии банальной эрудиции комментариев в конфиге вполне хватает.

   inbound_directory (2:5021/44) /boot
   filebox /dev 2:5021/44 normal

Q: Как бы сделать чтоб он производил исходщие звонки только на несколько из
   описаных линков, а от остальных только принимал входщие ?
A: /SNP/
   Hа всех ставишь flavor холд, в конфиге bforce пишешь:

   options (outgoing)      NoHoldHold

   А потом outman'ом генеришь поллы для тех, кому надо звонить. IMHO самый
   оптимальный вариант.

Q: Имеется ли возможность ручной настройки акаматчинга (т.е. для какого адреса
   какой из ака показать и какой из них показать первичным (в качестве
   основного)? или же есть патч и т.п. приблуда к исходникам?
A: /SNP/
   Просто показывай только нужные AKA. Если, к примеру, у теб есть поинтова
   AKA, то совсем не надо показывать боссу что-то еще.

   address (!2:xxxx/xxx) 2:5025/2275
   address (2:xxxx/xxx)  2:xxxx/xxx.xx

Q: А какая последн версия BinkleyForce?
A: /All/
   0.22.7! Брать на ftp://dig.pp.ru/archive/tools/ftn/bforce-0.22.7.tar.bz2.

Q: Как подключать нодлисты с цифровыми расширениями? Маски в конфиге bforce не
   задаются.
A: /MR/
   В bforce.conf:
   nodelist       net5030.ndl     2:5030/*.0
   nodelist       pnt5030.ndl     2:5030/*.*

   Компилировать примерно таким скриптом:

   #!/bin/sh
   nodedir=/var/spool/bforce/ndl
   nodefiledir=/var/spool/fido/fil/spb_nczp
   pntfile=/var/spool/fido/fil/pnt5030/pnt5030.zip
   rm "$nodedir/net5030.*" 1> /dev/null 2> dev/null
   rm "$nodedir/pnt5030.*" 1> /dev/null 2> dev/null
   # в zzz последний по дате сегмент
   zzz=`ls -t /var/spool/fido/fil/spb_nczp/net5030.z* | head -n 1`
   [ -f $zzz ] && unzip -L -qq $zzz -d$nodedir/
   unzip -L -qq $pntfile -d$nodedir/
   ln -s `ls $nodedir/net5030.???` $nodedir/net5030.ndl
   ln -s `ls $nodedir/pnt5030.???` $nodedir/pnt5030.ndl
   /usr/local/bin/bfindex&

Q: Как правильно настроить файлбоксы в bforce 0.22.4?
A: /KAS/
   Патчик наложил? http://kst.nm.ru/bforce-filebox-0.22.4.diff.gz - это мое,
   тут пробегало еще одно, но  не помню чье и где оно лежит. Там пропишешь в
   bforce.conf что-то вроде "filebox_directory /fido/fb", а файлбоксы будут
   вида /fido/fb/1.2.3.4 дл 1:2/3.4 (для ноды последний ноль обязателен).
   Боксы со статусом hold.

   /GM/
   Это мое и лежит оно тyт
   http://btrieve.virtualave.net/files/bf0224-filebox.diff.rar
   в моем патче, в отличие от пpедыдyщего, не все подpд имеют тип
   TYPE_FILEBOX.
   мыло - это TYPE_NETMAIL, эхи - TYPE_ARCMAIL и т.д.
   Это yдобно дл пpосмотpа статистики поинтy - что на него лежит.
   Плюс некотоpые косметические изменени.

   /All/
   В текущей версии файлбоксы есть по умолчанию.

Q: А почему у меня в inbound повлются странные файлы под именем 'd'?
   Удаленна система такого не посылала... :-( Как лечить?
A: /All/
   Взть последнюю версию bforce. Исправлено со времен 0.22.5.

Q: Как bforce научить долбиться по ip если адрес задан, а не по нодлистовому
   телефону?
A: /AB/
   Hу что-нибудь вроде:
   override 2:5020/??? phone none ipaddr f???.n5020.z2.fidonet.net
   Еще можно добавить флаги: BINKP - дл BinkP или IFC - дл EMSI/..

Q: Демон забивает на указание ip...и звонит по нодлистовому телефону. Вот как
   это пофиксить?
A: /AB/
   Это бага така. Для этого и прописываетс "phone none".

Q: Я не понял, почему aftersession запускается, когда еще есть bsy?! Весь
   нужный эффект теряется (bforce 0.22.3).
A: /AB/
   Почему теряется? Он же в отдельной сессии запускаться может и бфорсу не
   обязательно ждать его завершения.

Q: subst'ы было бы неплохо расширить т.к. очень не хватает AT~S91=7~DP :-(
A: /SNP/
   modem_dial_prefix (2:5020/758) AT+ms=11|`ATDP
   Ы?

Q: Как разделить inbound unprotected от protected inbound  так и не понял :-)
A: /SNP/
   inbound_directory (Protected)   /var/spool/fido/inb-protected
   inbound_directory               /var/spool/fido/inb
Прим.: начина с 0.22.3 пример конфига имеет аналогичный порядок.

Q: Статистику после сессии  собрать так и не смог. Пишет: "can't get modem
   statistic: Modem not response". Модем IDC-2814BXL/VR+.
A: /SNP/
   Это из-за тормознутости Rockwell'а :( Собирай так (с паузой перед `AT'):
   modem_stat_command ~AT%S%S1\#UD|

Q: Входящие по binkp не желает принимать. Hа той стороне
   binkd/0.9.2/Linux (binkp/1.1). Поставил себе на ответ по binkp
   binkd-0.9.4 - все заработало. Разбираться лениво :-).
A: /AB/
   А ты как пробовал? Достаточно прописать его в inetd:
   binkp stream tcp nowait fido /usr/local/lib/ftn/bforce bforce -i binkp

Q: А как бы сделать так, чтобы можно было прописать другую директорию для
   локов? У мен, например, они в /var/spool/lock лежат...
A: /AB/
   Либо поправить autoconf (configure.in), либо ручками в config.h прописать.

Q: А средствами bforce можно реализовать поддержку zmh?
A: /AB/
   options (Time 5:30-6:30) mailonly
   Это только дл мэйлера. Демон ZMH не умеет поддерживать!

Q: А вот интересно, для bforce все еще строго рекомендуется указывать в options
   'NoDirZap NoJanus' или их уже можно кушать? ;-)
A: /AB/
   Этих протоколов нет.

Q: Пример конфига 'override 2:5029/9 Phone Unpublished' не работает :-(
A: /VS/
   override 2:5029/9 Phone None

Q: У меня прописано несколько hidden'ов, но bforce упорно звонит только по
   одному из них.
A: /PVC/
   Така проблема есть. Патч от автора дл 0.22.4 проходил по эхе в виде
   UUE. Также доступен для фреков на 2:5020/2091 как
   bforce-0.22.4-0.22.4pl2.diff.bz2. Время для фреков c 1:00 до 5:20, c
   7:40-9:00.

Q: Подскажите, пожалyйста, как запpетить непаpольные соединени.
A: /AB/
   options (Incoming && !Protected) NoZmodem NoZedzap NoHydra

Q: Хотелось бы поиметь что-то аналогичное для binkp-соединений. В binkd 0.9.2
   например, можно запретить отдачу по непарольным линкам... Возможно ли это в
   bforce?
A: /DR/
   options не работает дл binkp-сессий.  Работает вот это:
   delay_files_recv (incoming && !protected) !%netmail
   delay_files_send (!protected) !%netmail
   И в подобном стиле можно ограничивать прием/передачу по другим критерим.

===

  Thanx to:

AB  = Alexander Belkin, 2:5020/2120
All = Коллективный разум эхи
DR  = Dmitry Rodin, 2:5020/5410
GM  = George Mozhaev, 2:5011/211.1
KAS = konstantin a. stepanenkoff, 2:5030/1251
MR  = Maxi Rovnich, 2:5030/872
PVC = Peter V. Chernikoff, 2:5020/2091
SNP = Serge N. Pokhodyaev, 2:5020/1838
VS  = Valery Shishkov, 2:5040/9

Исправления и добавления в виде пар вопрос/ответ будут с благодарностью приняты
в netmail.
По материалам эхи ru.unix.ftn собрал Sergey Eremin, 2:5029/92.1@fidonet
